<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Array sort</title>
</head>
<body>
    <script>

    function sort(input) {
        
        if (typeof(input) !== "string") {
            return null; 
        }
        
        // Prepare string for further processing
        var inputArr = input.trim().replace(/\s+/g, " ").split(" ");
        var objectArr = []; 

        // Create object array with pair { value, wt } of each element
        for (var i = 0; i < inputArr.length; i++) {
            
            objectArr.push( { value: +inputArr[i], wt: i+1 } ); 

        }

        // Sort object array
        objectArr.sort(function(a, b){

            // if 'wt' is the same
            if ( (b.value * b.wt) === (a.value * a.wt) ) 

                // then sort by 'value'
                return b.value - a.value;
            
            // else sort by 'wt'
            return (b.value * b.wt) - (a.value * a.wt);
        });
        
        var outputArr = [];
        
        // Object array is already sorted, so create output array only with values
        for (var i = 0; i < inputArr.length; i++) {
            outputArr.push(objectArr[i].value);
        }

        return outputArr;
    }

    // [25, 30, 3, 5]
    console.log(sort("5  3 30 25 ")); 
    
    // [3, 2, 3]
    console.log(sort(" 3 3 2 "));

    // [2, 3, 2, 1, -1, -3]
    console.log(sort(" -1 2 3 1 2 -3 "));

    // []
    console.log(sort("   "));

    // [3, 2, 1]
    console.log(sort(" 1 3 2 "));

    // My test
    console.log(sort(" 3 3 2 2  7  1 8  9"));
    </script>
</body>
</html>
